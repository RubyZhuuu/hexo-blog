title: CSS定位-position属性
tags:
  - css
  - 读书笔记
---
CSS的position属性总结。感觉这不是三言两语能说清楚。在了解position之前，需要知道行内元素和块级元素的概念，需要知道行内框怎么生成，块级框怎么生成，还需要知道盒子模型，更重要的是理解包含块。

## 包含块
根元素（HTML或者body元素）的包含块被称为初始包含块，初始包含块是一个浏览器窗口大小的框；
对于position值为static或者relative的非根元素来说，本身。
对于position为absolute的元素，其包含块是最近的position值不为static的父级元素，如果没有这样的祖先，则其包含块是初始包含块。
对于fixed定位的元素来说，包含块是初始包含块。

## 定位的基本概念
定位指的是指定元素相对于元素本身，或者父元素，或者其他元素，甚至浏览器窗口应该摆放在什么位置。
position的初始值是static，即按照正常文档流摆放，也就是说按照从上到下、从左到右的摆放。
position的其余值有：
relative：元素的元素框偏移（偏移属性稍后介绍）某个距离，但是原来的位置仍然保留。
absolute：元素的元素框从文档流中完全被删除，位置被其他元素占用。使用absolute之后，元素生成一个块级框，而不管它本身是什么元素。相对于其包含块进行偏移。
fixed：元素框的操作类似于absolute，但是对于fixed的元素来说，包含块是初级包含块。

## 偏移属性
指的是left，right，top，bottom四个属性。这四个属性只有在position不为static时才生效。也就是说对正常流中的元素设置偏移属性是无效的。

## relative定位中元素的位置和大小
relative定位中，元素的偏移是相对于其在正常流中的位置而定的。
top为正数则向下偏移，left为正数则向左偏移。
若过分受限，如：
``` css
top:10px;
bottom: 20px;
```
则总是将bottom（right）的值重置为top（left）的相反数。
relative定位很重要的一点，即使该元素进行了偏移，其原有位置仍然保留，这一点不同于margin负值。

## 绝对定位中非替换元素的位置和大小
绝对定位相对于包含块定位。绝对定位会为后代生成一个包含块（因为它的position不是static了）。
元素的大小和位置一般来说取决于包含块。盒模型的水平公式再加上left和right，就得到绝对定位中元素水平关系的等式。
元素的width如果是auto，一般会设置为刚好包含下元素的内容。
在水平方向上，如果width，margin-left，mergin-right，left，right中只有一个属性是auto，则会把这个auto值重置以刚好满足等式关系。如果过分受限，一般会重置right值。
垂直方向上，两个margin设置为auto可以得到垂直居中（注意，在绝对定位中可以，对于static元素绝对不可以）。另外，不设置height，把top和bottom设置为一样的值也可以垂直居中。如果在垂直方向上过分受限会忽略bottom值。


## 绝对定位中替换元素的位置和大小
绝对定位中，替换元素的定位有所不同，理由是替换元素通常有自己的高度和宽度，而不会所谓的进行伸缩以刚好包含内容。

## 固定定位
固定定位的行为与绝对定位基本类似，只不过它的位置是相对于视窗而言的。
